<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="book">
    <select id="getListBook" parameterType="book" resultType="book">
        select b.number,b.name,b.author,b.price,b.publisher,b.userId,u.name as userName from tb_book b LEFT JOIN tb_user u on b.userId=u.id
        <where>
        	<if test="name != '' and name != null">
        		and b.name like '%${name}%'
        	</if>
        	<if test="number != '' and number != null">
        		and b.number like '%${number}%'
        	</if>
        </where>
    </select>
  <select id="getBookCount" parameterType="book" resultType="int">
  	select count(*) from tb_book;
  </select>
  <update id="updateBook">
update tb_book set
number=#{number},name=#{name},author=#{author},price=#{price},publisher=#{publisher}
where number=#{number}
  </update>
  <delete id="deleteBook" parameterType="book">
  	delete from tb_book where number=#{number}
  </delete>
  
  <insert id="insertBook">
  INSERT INTO tb_book
(number,name,author,price,publisher,userId)
VALUES
(#{number},#{name},#{author},#{price},#{publisher},#{userId})
  </insert>
  

  
  
</mapper>